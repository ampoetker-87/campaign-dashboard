{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _loadScript = require('load-script');\n\nvar _loadScript2 = _interopRequireDefault(_loadScript);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar GOOGLE_SDK_URL = 'https://apis.google.com/js/api.js';\nvar scriptLoadingStarted = false;\n\nvar GoogleChooser = function (_React$Component) {\n  _inherits(GoogleChooser, _React$Component);\n\n  function GoogleChooser(props) {\n    _classCallCheck(this, GoogleChooser);\n\n    var _this = _possibleConstructorReturn(this, (GoogleChooser.__proto__ || Object.getPrototypeOf(GoogleChooser)).call(this, props));\n\n    _this.onApiLoad = _this.onApiLoad.bind(_this);\n    _this.onChoose = _this.onChoose.bind(_this);\n    return _this;\n  }\n\n  _createClass(GoogleChooser, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.isGoogleReady()) {\n        // google api is already exists\n        // init immediately\n        this.onApiLoad();\n      } else if (!scriptLoadingStarted) {\n        // load google api and the init\n        scriptLoadingStarted = true;\n        (0, _loadScript2.default)(GOOGLE_SDK_URL, this.onApiLoad);\n      } else {// is loading\n      }\n    }\n  }, {\n    key: 'isGoogleReady',\n    value: function isGoogleReady() {\n      return !!window.gapi;\n    }\n  }, {\n    key: 'isGoogleAuthReady',\n    value: function isGoogleAuthReady() {\n      return !!window.gapi.auth;\n    }\n  }, {\n    key: 'isGooglePickerReady',\n    value: function isGooglePickerReady() {\n      return !!window.google.picker;\n    }\n  }, {\n    key: 'onApiLoad',\n    value: function onApiLoad() {\n      window.gapi.load('auth');\n      window.gapi.load('picker');\n    }\n  }, {\n    key: 'doAuth',\n    value: function doAuth(callback) {\n      window.gapi.auth.authorize({\n        client_id: this.props.clientId,\n        scope: this.props.scope,\n        immediate: this.props.authImmediate\n      }, callback);\n    }\n  }, {\n    key: 'onChoose',\n    value: function onChoose() {\n      var _this2 = this;\n\n      if (!this.isGoogleReady() || !this.isGoogleAuthReady() || !this.isGooglePickerReady() || this.props.disabled) {\n        return null;\n      }\n\n      var token = window.gapi.auth.getToken();\n      var oauthToken = token && token.access_token;\n\n      if (oauthToken) {\n        this.createPicker(oauthToken);\n      } else {\n        this.doAuth(function (response) {\n          if (response.access_token) {\n            _this2.createPicker(response.access_token);\n          } else {\n            _this2.props.onAuthFailed(response);\n          }\n        });\n      }\n    }\n  }, {\n    key: 'createPicker',\n    value: function createPicker(oauthToken) {\n      this.props.onAuthenticate(oauthToken);\n\n      if (this.props.createPicker) {\n        return this.props.createPicker(google, oauthToken);\n      }\n\n      var googleViewId = google.picker.ViewId[this.props.viewId];\n      var view = new window.google.picker.View(googleViewId);\n\n      if (this.props.mimeTypes) {\n        view.setMimeTypes(this.props.mimeTypes.join(','));\n      }\n\n      if (this.props.query) {\n        view.setQuery(this.props.query);\n      }\n\n      if (!view) {\n        throw new Error('Can\\'t find view by viewId');\n      }\n\n      var picker = new window.google.picker.PickerBuilder().addView(view).setOAuthToken(oauthToken).setDeveloperKey(this.props.developerKey).setCallback(this.props.onChange);\n\n      if (this.props.origin) {\n        picker.setOrigin(this.props.origin);\n      }\n\n      if (this.props.navHidden) {\n        picker.enableFeature(window.google.picker.Feature.NAV_HIDDEN);\n      }\n\n      if (this.props.multiselect) {\n        picker.enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED);\n      }\n\n      picker.build().setVisible(true);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement('div', {\n        onClick: this.onChoose\n      }, this.props.children ? this.props.children : _react2.default.createElement('button', null, 'Open google chooser'));\n    }\n  }]);\n\n  return GoogleChooser;\n}(_react2.default.Component);\n\nGoogleChooser.propTypes = {\n  children: _propTypes2.default.node,\n  clientId: _propTypes2.default.string.isRequired,\n  developerKey: _propTypes2.default.string,\n  scope: _propTypes2.default.array,\n  viewId: _propTypes2.default.string,\n  authImmediate: _propTypes2.default.bool,\n  origin: _propTypes2.default.string,\n  onChange: _propTypes2.default.func,\n  onAuthenticate: _propTypes2.default.func,\n  onAuthFailed: _propTypes2.default.func,\n  createPicker: _propTypes2.default.func,\n  multiselect: _propTypes2.default.bool,\n  navHidden: _propTypes2.default.bool,\n  disabled: _propTypes2.default.bool\n};\nGoogleChooser.defaultProps = {\n  onChange: function onChange() {},\n  onAuthenticate: function onAuthenticate() {},\n  onAuthFailed: function onAuthFailed() {},\n  scope: ['https://www.googleapis.com/auth/drive.readonly'],\n  viewId: 'DOCS',\n  authImmediate: false,\n  multiselect: false,\n  navHidden: false,\n  disabled: false\n};\nexports.default = GoogleChooser;","map":{"version":3,"sources":["/Users/amandapoetker-alles/Desktop/campaign-dashboard/node_modules/react-google-picker/dist/react-google-picker.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_loadScript","_loadScript2","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","GOOGLE_SDK_URL","scriptLoadingStarted","GoogleChooser","_React$Component","_this","getPrototypeOf","onApiLoad","bind","onChoose","componentDidMount","isGoogleReady","window","gapi","isGoogleAuthReady","auth","isGooglePickerReady","google","picker","load","doAuth","callback","authorize","client_id","clientId","scope","immediate","authImmediate","_this2","disabled","token","getToken","oauthToken","access_token","createPicker","response","onAuthFailed","onAuthenticate","googleViewId","ViewId","viewId","view","View","mimeTypes","setMimeTypes","join","query","setQuery","Error","PickerBuilder","addView","setOAuthToken","setDeveloperKey","developerKey","setCallback","onChange","origin","setOrigin","navHidden","enableFeature","Feature","NAV_HIDDEN","multiselect","MULTISELECT_ENABLED","build","setVisible","render","createElement","onClick","children","Component","propTypes","node","string","isRequired","array","bool","func","defaultProps"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _loadScript = require('load-script');\n\nvar _loadScript2 = _interopRequireDefault(_loadScript);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar GOOGLE_SDK_URL = 'https://apis.google.com/js/api.js';\n\nvar scriptLoadingStarted = false;\n\nvar GoogleChooser = function (_React$Component) {\n  _inherits(GoogleChooser, _React$Component);\n\n  function GoogleChooser(props) {\n    _classCallCheck(this, GoogleChooser);\n\n    var _this = _possibleConstructorReturn(this, (GoogleChooser.__proto__ || Object.getPrototypeOf(GoogleChooser)).call(this, props));\n\n    _this.onApiLoad = _this.onApiLoad.bind(_this);\n    _this.onChoose = _this.onChoose.bind(_this);\n    return _this;\n  }\n\n  _createClass(GoogleChooser, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.isGoogleReady()) {\n        // google api is already exists\n        // init immediately\n        this.onApiLoad();\n      } else if (!scriptLoadingStarted) {\n        // load google api and the init\n        scriptLoadingStarted = true;\n        (0, _loadScript2.default)(GOOGLE_SDK_URL, this.onApiLoad);\n      } else {\n        // is loading\n      }\n    }\n  }, {\n    key: 'isGoogleReady',\n    value: function isGoogleReady() {\n      return !!window.gapi;\n    }\n  }, {\n    key: 'isGoogleAuthReady',\n    value: function isGoogleAuthReady() {\n      return !!window.gapi.auth;\n    }\n  }, {\n    key: 'isGooglePickerReady',\n    value: function isGooglePickerReady() {\n      return !!window.google.picker;\n    }\n  }, {\n    key: 'onApiLoad',\n    value: function onApiLoad() {\n      window.gapi.load('auth');\n      window.gapi.load('picker');\n    }\n  }, {\n    key: 'doAuth',\n    value: function doAuth(callback) {\n      window.gapi.auth.authorize({\n        client_id: this.props.clientId,\n        scope: this.props.scope,\n        immediate: this.props.authImmediate\n      }, callback);\n    }\n  }, {\n    key: 'onChoose',\n    value: function onChoose() {\n      var _this2 = this;\n\n      if (!this.isGoogleReady() || !this.isGoogleAuthReady() || !this.isGooglePickerReady() || this.props.disabled) {\n        return null;\n      }\n\n      var token = window.gapi.auth.getToken();\n      var oauthToken = token && token.access_token;\n\n      if (oauthToken) {\n        this.createPicker(oauthToken);\n      } else {\n        this.doAuth(function (response) {\n          if (response.access_token) {\n            _this2.createPicker(response.access_token);\n          } else {\n            _this2.props.onAuthFailed(response);\n          }\n        });\n      }\n    }\n  }, {\n    key: 'createPicker',\n    value: function createPicker(oauthToken) {\n\n      this.props.onAuthenticate(oauthToken);\n\n      if (this.props.createPicker) {\n        return this.props.createPicker(google, oauthToken);\n      }\n\n      var googleViewId = google.picker.ViewId[this.props.viewId];\n      var view = new window.google.picker.View(googleViewId);\n\n      if (this.props.mimeTypes) {\n        view.setMimeTypes(this.props.mimeTypes.join(','));\n      }\n      if (this.props.query) {\n        view.setQuery(this.props.query);\n      }\n\n      if (!view) {\n        throw new Error('Can\\'t find view by viewId');\n      }\n\n      var picker = new window.google.picker.PickerBuilder().addView(view).setOAuthToken(oauthToken).setDeveloperKey(this.props.developerKey).setCallback(this.props.onChange);\n\n      if (this.props.origin) {\n        picker.setOrigin(this.props.origin);\n      }\n\n      if (this.props.navHidden) {\n        picker.enableFeature(window.google.picker.Feature.NAV_HIDDEN);\n      }\n\n      if (this.props.multiselect) {\n        picker.enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED);\n      }\n\n      picker.build().setVisible(true);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'div',\n        { onClick: this.onChoose },\n        this.props.children ? this.props.children : _react2.default.createElement(\n          'button',\n          null,\n          'Open google chooser'\n        )\n      );\n    }\n  }]);\n\n  return GoogleChooser;\n}(_react2.default.Component);\n\nGoogleChooser.propTypes = {\n  children: _propTypes2.default.node,\n  clientId: _propTypes2.default.string.isRequired,\n  developerKey: _propTypes2.default.string,\n  scope: _propTypes2.default.array,\n  viewId: _propTypes2.default.string,\n  authImmediate: _propTypes2.default.bool,\n  origin: _propTypes2.default.string,\n  onChange: _propTypes2.default.func,\n  onAuthenticate: _propTypes2.default.func,\n  onAuthFailed: _propTypes2.default.func,\n  createPicker: _propTypes2.default.func,\n  multiselect: _propTypes2.default.bool,\n  navHidden: _propTypes2.default.bool,\n  disabled: _propTypes2.default.bool\n};\nGoogleChooser.defaultProps = {\n  onChange: function onChange() {},\n  onAuthenticate: function onAuthenticate() {},\n  onAuthFailed: function onAuthFailed() {},\n  scope: ['https://www.googleapis.com/auth/drive.readonly'],\n  viewId: 'DOCS',\n  authImmediate: false,\n  multiselect: false,\n  navHidden: false,\n  disabled: false\n};\nexports.default = GoogleChooser;"]},"metadata":{},"sourceType":"script"}