{"ast":null,"code":"\"use strict\"; // Copyright 2014-2016, Google, Inc.\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//    http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nvar _classCallCheck = require(\"/Users/amandapoetker-alles/Desktop/campaign-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/amandapoetker-alles/Desktop/campaign-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"/Users/amandapoetker-alles/Desktop/campaign-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/amandapoetker-alles/Desktop/campaign-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar _regeneratorRuntime = require(\"/Users/amandapoetker-alles/Desktop/campaign-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar google_auth_library_1 = require(\"google-auth-library\");\n\nvar qs = require(\"qs\");\n\nvar stream = require(\"stream\");\n\nvar urlTemplate = require(\"url-template\");\n\nvar uuid = require(\"uuid\");\n\nvar isbrowser_1 = require(\"./isbrowser\"); // tslint:disable-next-line no-var-requires\n\n\nvar pkg = require('../../package.json');\n\nfunction isReadableStream(obj) {\n  return obj instanceof stream.Readable && typeof obj._read === 'function';\n}\n\nfunction getMissingParams(params, required) {\n  var missing = new Array();\n  required.forEach(function (param) {\n    // Is the required param in the params object?\n    if (params[param] === undefined) {\n      missing.push(param);\n    }\n  }); // If there are any required params missing, return their names in array,\n  // otherwise return null\n\n  return missing.length > 0 ? missing : null;\n}\n\nfunction createAPIRequest(parameters, callback) {\n  if (callback) {\n    createAPIRequestAsync(parameters).then(function (r) {\n      return callback(null, r);\n    }, callback);\n  } else {\n    return createAPIRequestAsync(parameters);\n  }\n}\n\nexports.createAPIRequest = createAPIRequest;\n\nfunction createAPIRequestAsync(parameters) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var params, options, topOptions, media, resource, authClient, defaultMime, headers, missingParams, multipart, boundary, finale, rStream, pStream, isStream, _i, _multipart, part, preamble, directives, userAgent, mergedOptions;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            params = parameters.params;\n            options = Object.assign({}, parameters.options); // Create a new params object so it can no longer be modified from outside\n            // code Also support global and per-client params, but allow them to be\n            // overriden per-request\n\n            topOptions = parameters.context.google ? parameters.context.google._options.params : {};\n            params = Object.assign({}, // New base object\n            topOptions, // Global params\n            parameters.context._options.params, // Per-client params\n            params // API call params\n            );\n            media = params.media || {};\n            /**\n             * In a previous version of this API, the request body was stuffed in a field\n             * named `resource`.  This caused lots of problems, because it's not uncommon\n             * to have an actual named parameter required which is also named `resource`.\n             * This mean that users would have to use `resource_` in those cases, which\n             * pretty much nobody figures out on their own. The request body is now\n             * documented as being in the `requestBody` property, but we also need to keep\n             * using `resource` for reasons of back-compat. Cases that need to be covered\n             * here:\n             * - user provides just a `resource` with a request body\n             * - user provides both a `resource` and a `resource_`\n             * - user provides just a `requestBody`\n             * - user provides both a `requestBody` and a `resource`\n             */\n\n            resource = params.requestBody ? params.requestBody : params.resource;\n\n            if (!params.requestBody && params.resource) {\n              delete params.resource;\n            }\n\n            delete params.requestBody;\n            authClient = params.auth || parameters.context._options.auth || (parameters.context.google ? parameters.context.google._options.auth : null);\n            defaultMime = typeof media.body === 'string' ? 'text/plain' : 'application/octet-stream';\n            delete params.media;\n            delete params.auth; // Grab headers from user provided options\n\n            headers = params.headers || {};\n            delete params.headers; // Un-alias parameters that were modified due to conflicts with reserved names\n\n            Object.keys(params).forEach(function (key) {\n              if (key.slice(-1) === '_') {\n                var newKey = key.slice(0, -1);\n                params[newKey] = params[key];\n                delete params[key];\n              }\n            }); // Check for missing required parameters in the API request\n\n            missingParams = getMissingParams(params, parameters.requiredParams);\n\n            if (!missingParams) {\n              _context.next = 18;\n              break;\n            }\n\n            throw new Error('Missing required parameters: ' + missingParams.join(', '));\n\n          case 18:\n            // Parse urls\n            if (options.url) {\n              options.url = urlTemplate.parse(options.url).expand(params);\n            }\n\n            if (parameters.mediaUrl) {\n              parameters.mediaUrl = urlTemplate.parse(parameters.mediaUrl).expand(params);\n            } // When forming the querystring, override the serializer so that array\n            // values are serialized like this:\n            // myParams: ['one', 'two'] ---> 'myParams=one&myParams=two'\n            // This serializer also encodes spaces in the querystring as `%20`,\n            // whereas the default serializer in gaxios encodes to a `+`.\n\n\n            options.paramsSerializer = function (params) {\n              return qs.stringify(params, {\n                arrayFormat: 'repeat'\n              });\n            }; // delete path parameters from the params object so they do not end up in\n            // query\n\n\n            parameters.pathParams.forEach(function (param) {\n              delete params[param];\n            }); // if authClient is actually a string, use it as an API KEY\n\n            if (typeof authClient === 'string') {\n              params.key = params.key || authClient;\n              authClient = undefined;\n            }\n\n            if (parameters.mediaUrl && media.body) {\n              options.url = parameters.mediaUrl;\n\n              if (resource) {\n                // gaxios doesn't support multipart/related uploads, so it has to\n                // be implemented here.\n                params.uploadType = 'multipart';\n                multipart = [{\n                  'Content-Type': 'application/json',\n                  body: JSON.stringify(resource)\n                }, {\n                  'Content-Type': media.mimeType || resource && resource.mimeType || defaultMime,\n                  body: media.body // can be a readable stream or raw string!\n\n                }];\n                boundary = uuid.v4();\n                finale = \"--\".concat(boundary, \"--\");\n                rStream = new stream.PassThrough({\n                  flush(callback) {\n                    this.push('\\r\\n');\n                    this.push(finale);\n                    callback();\n                  }\n\n                });\n                pStream = new ProgressStream();\n                isStream = isReadableStream(multipart[1].body);\n                headers['Content-Type'] = \"multipart/related; boundary=\".concat(boundary);\n\n                for (_i = 0, _multipart = multipart; _i < _multipart.length; _i++) {\n                  part = _multipart[_i];\n                  preamble = \"--\".concat(boundary, \"\\r\\nContent-Type: \").concat(part['Content-Type'], \"\\r\\n\\r\\n\");\n                  rStream.push(preamble);\n\n                  if (typeof part.body === 'string') {\n                    rStream.push(part.body);\n                    rStream.push('\\r\\n');\n                  } else {\n                    // Gaxios does not natively support onUploadProgress in node.js.\n                    // Pipe through the pStream first to read the number of bytes read\n                    // for the purpose of tracking progress.\n                    pStream.on('progress', function (bytesRead) {\n                      if (options.onUploadProgress) {\n                        options.onUploadProgress({\n                          bytesRead\n                        });\n                      }\n                    });\n                    part.body.pipe(pStream).pipe(rStream);\n                  }\n                }\n\n                if (!isStream) {\n                  rStream.push(finale);\n                  rStream.push(null);\n                }\n\n                options.data = rStream;\n              } else {\n                params.uploadType = 'media';\n                Object.assign(headers, {\n                  'Content-Type': media.mimeType || defaultMime\n                });\n                options.data = media.body;\n              }\n            } else {\n              options.data = resource || undefined;\n            }\n\n            options.headers = headers;\n            options.params = params;\n\n            if (!isbrowser_1.isBrowser()) {\n              options.headers['Accept-Encoding'] = 'gzip';\n              directives = options.userAgentDirectives || [];\n              directives.push({\n                product: 'google-api-nodejs-client',\n                version: pkg.version,\n                comment: 'gzip'\n              });\n              userAgent = directives.map(function (d) {\n                var line = \"\".concat(d.product, \"/\").concat(d.version);\n\n                if (d.comment) {\n                  line += \" (\".concat(d.comment, \")\");\n                }\n\n                return line;\n              }).join(' ');\n              options.headers['User-Agent'] = userAgent;\n            } // By default gaxios treats any 2xx as valid, and all non 2xx status\n            // codes as errors.  This is a problem for HTTP 304s when used along\n            // with an eTag.\n\n\n            if (!options.validateStatus) {\n              options.validateStatus = function (status) {\n                return status >= 200 && status < 300 || status === 304;\n              };\n            } // Combine the GaxiosOptions options passed with this specific\n            // API call witht the global options configured at the API Context\n            // level, or at the global level.\n\n\n            mergedOptions = Object.assign({}, parameters.context.google ? parameters.context.google._options : {}, parameters.context._options, options);\n            delete mergedOptions.auth; // is overridden by our auth code\n            // Perform the HTTP request.  NOTE: this function used to return a\n            // mikeal/request object. Since the transition to Axios, the method is\n            // now void.  This may be a source of confusion for users upgrading from\n            // version 24.0 -> 25.0 or up.\n\n            if (!(authClient && typeof authClient === 'object')) {\n              _context.next = 34;\n              break;\n            }\n\n            return _context.abrupt(\"return\", authClient.request(mergedOptions));\n\n          case 34:\n            return _context.abrupt(\"return\", new google_auth_library_1.DefaultTransporter().request(mergedOptions));\n\n          case 35:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n/**\n * Basic Passthrough Stream that records the number of bytes read\n * every time the cursor is moved.\n */\n\n\nvar ProgressStream = /*#__PURE__*/function (_stream$Transform) {\n  _inherits(ProgressStream, _stream$Transform);\n\n  var _super = _createSuper(ProgressStream);\n\n  function ProgressStream() {\n    var _this;\n\n    _classCallCheck(this, ProgressStream);\n\n    _this = _super.apply(this, arguments);\n    _this.bytesRead = 0;\n    return _this;\n  } // tslint:disable-next-line: no-any\n\n\n  _createClass(ProgressStream, [{\n    key: \"_transform\",\n    value: function _transform(chunk, encoding, callback) {\n      this.bytesRead += chunk.length;\n      this.emit('progress', this.bytesRead);\n      this.push(chunk);\n      callback();\n    }\n  }]);\n\n  return ProgressStream;\n}(stream.Transform);","map":{"version":3,"sources":["/Users/amandapoetker-alles/Desktop/campaign-dashboard/node_modules/googleapis-common/build/src/apirequest.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","google_auth_library_1","require","qs","stream","urlTemplate","uuid","isbrowser_1","pkg","isReadableStream","obj","Readable","_read","getMissingParams","params","required","missing","Array","forEach","param","undefined","push","length","createAPIRequest","parameters","callback","createAPIRequestAsync","r","options","assign","topOptions","context","google","_options","media","resource","requestBody","authClient","auth","defaultMime","body","headers","keys","key","slice","newKey","missingParams","requiredParams","Error","join","url","parse","expand","mediaUrl","paramsSerializer","stringify","arrayFormat","pathParams","uploadType","multipart","JSON","mimeType","boundary","v4","finale","rStream","PassThrough","flush","pStream","ProgressStream","isStream","part","preamble","on","bytesRead","onUploadProgress","pipe","data","isBrowser","directives","userAgentDirectives","product","version","comment","userAgent","map","d","line","validateStatus","status","mergedOptions","request","DefaultTransporter","arguments","chunk","encoding","emit","Transform"],"mappings":"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","sourcesContent":["\"use strict\";\n// Copyright 2014-2016, Google, Inc.\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//    http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst google_auth_library_1 = require(\"google-auth-library\");\nconst qs = require(\"qs\");\nconst stream = require(\"stream\");\nconst urlTemplate = require(\"url-template\");\nconst uuid = require(\"uuid\");\nconst isbrowser_1 = require(\"./isbrowser\");\n// tslint:disable-next-line no-var-requires\nconst pkg = require('../../package.json');\nfunction isReadableStream(obj) {\n    return obj instanceof stream.Readable && typeof obj._read === 'function';\n}\nfunction getMissingParams(params, required) {\n    const missing = new Array();\n    required.forEach(param => {\n        // Is the required param in the params object?\n        if (params[param] === undefined) {\n            missing.push(param);\n        }\n    });\n    // If there are any required params missing, return their names in array,\n    // otherwise return null\n    return missing.length > 0 ? missing : null;\n}\nfunction createAPIRequest(parameters, callback) {\n    if (callback) {\n        createAPIRequestAsync(parameters).then(r => callback(null, r), callback);\n    }\n    else {\n        return createAPIRequestAsync(parameters);\n    }\n}\nexports.createAPIRequest = createAPIRequest;\nfunction createAPIRequestAsync(parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let params = parameters.params;\n        const options = Object.assign({}, parameters.options);\n        // Create a new params object so it can no longer be modified from outside\n        // code Also support global and per-client params, but allow them to be\n        // overriden per-request\n        const topOptions = parameters.context.google ?\n            parameters.context.google._options.params :\n            {};\n        params = Object.assign({}, // New base object\n        topOptions, // Global params\n        parameters.context._options.params, // Per-client params\n        params // API call params\n        );\n        const media = params.media || {};\n        /**\n         * In a previous version of this API, the request body was stuffed in a field\n         * named `resource`.  This caused lots of problems, because it's not uncommon\n         * to have an actual named parameter required which is also named `resource`.\n         * This mean that users would have to use `resource_` in those cases, which\n         * pretty much nobody figures out on their own. The request body is now\n         * documented as being in the `requestBody` property, but we also need to keep\n         * using `resource` for reasons of back-compat. Cases that need to be covered\n         * here:\n         * - user provides just a `resource` with a request body\n         * - user provides both a `resource` and a `resource_`\n         * - user provides just a `requestBody`\n         * - user provides both a `requestBody` and a `resource`\n         */\n        const resource = params.requestBody ? params.requestBody : params.resource;\n        if (!params.requestBody && params.resource) {\n            delete params.resource;\n        }\n        delete params.requestBody;\n        let authClient = params.auth || parameters.context._options.auth ||\n            (parameters.context.google ? parameters.context.google._options.auth :\n                null);\n        const defaultMime = typeof media.body === 'string' ?\n            'text/plain' :\n            'application/octet-stream';\n        delete params.media;\n        delete params.auth;\n        // Grab headers from user provided options\n        const headers = params.headers || {};\n        delete params.headers;\n        // Un-alias parameters that were modified due to conflicts with reserved names\n        Object.keys(params).forEach(key => {\n            if (key.slice(-1) === '_') {\n                const newKey = key.slice(0, -1);\n                params[newKey] = params[key];\n                delete params[key];\n            }\n        });\n        // Check for missing required parameters in the API request\n        const missingParams = getMissingParams(params, parameters.requiredParams);\n        if (missingParams) {\n            // Some params are missing - stop further operations and inform the\n            // developer which required params are not included in the request\n            throw new Error('Missing required parameters: ' + missingParams.join(', '));\n        }\n        // Parse urls\n        if (options.url) {\n            options.url = urlTemplate.parse(options.url).expand(params);\n        }\n        if (parameters.mediaUrl) {\n            parameters.mediaUrl = urlTemplate.parse(parameters.mediaUrl).expand(params);\n        }\n        // When forming the querystring, override the serializer so that array\n        // values are serialized like this:\n        // myParams: ['one', 'two'] ---> 'myParams=one&myParams=two'\n        // This serializer also encodes spaces in the querystring as `%20`,\n        // whereas the default serializer in gaxios encodes to a `+`.\n        options.paramsSerializer = (params) => {\n            return qs.stringify(params, { arrayFormat: 'repeat' });\n        };\n        // delete path parameters from the params object so they do not end up in\n        // query\n        parameters.pathParams.forEach(param => {\n            delete params[param];\n        });\n        // if authClient is actually a string, use it as an API KEY\n        if (typeof authClient === 'string') {\n            params.key = params.key || authClient;\n            authClient = undefined;\n        }\n        if (parameters.mediaUrl && media.body) {\n            options.url = parameters.mediaUrl;\n            if (resource) {\n                // gaxios doesn't support multipart/related uploads, so it has to\n                // be implemented here.\n                params.uploadType = 'multipart';\n                const multipart = [\n                    { 'Content-Type': 'application/json', body: JSON.stringify(resource) }, {\n                        'Content-Type': media.mimeType || (resource && resource.mimeType) || defaultMime,\n                        body: media.body // can be a readable stream or raw string!\n                    }\n                ];\n                const boundary = uuid.v4();\n                const finale = `--${boundary}--`;\n                const rStream = new stream.PassThrough({\n                    flush(callback) {\n                        this.push('\\r\\n');\n                        this.push(finale);\n                        callback();\n                    }\n                });\n                const pStream = new ProgressStream();\n                const isStream = isReadableStream(multipart[1].body);\n                headers['Content-Type'] = `multipart/related; boundary=${boundary}`;\n                for (const part of multipart) {\n                    const preamble = `--${boundary}\\r\\nContent-Type: ${part['Content-Type']}\\r\\n\\r\\n`;\n                    rStream.push(preamble);\n                    if (typeof part.body === 'string') {\n                        rStream.push(part.body);\n                        rStream.push('\\r\\n');\n                    }\n                    else {\n                        // Gaxios does not natively support onUploadProgress in node.js.\n                        // Pipe through the pStream first to read the number of bytes read\n                        // for the purpose of tracking progress.\n                        pStream.on('progress', bytesRead => {\n                            if (options.onUploadProgress) {\n                                options.onUploadProgress({ bytesRead });\n                            }\n                        });\n                        part.body.pipe(pStream).pipe(rStream);\n                    }\n                }\n                if (!isStream) {\n                    rStream.push(finale);\n                    rStream.push(null);\n                }\n                options.data = rStream;\n            }\n            else {\n                params.uploadType = 'media';\n                Object.assign(headers, { 'Content-Type': media.mimeType || defaultMime });\n                options.data = media.body;\n            }\n        }\n        else {\n            options.data = resource || undefined;\n        }\n        options.headers = headers;\n        options.params = params;\n        if (!isbrowser_1.isBrowser()) {\n            options.headers['Accept-Encoding'] = 'gzip';\n            const directives = options.userAgentDirectives || [];\n            directives.push({\n                product: 'google-api-nodejs-client',\n                version: pkg.version,\n                comment: 'gzip'\n            });\n            const userAgent = directives\n                .map(d => {\n                let line = `${d.product}/${d.version}`;\n                if (d.comment) {\n                    line += ` (${d.comment})`;\n                }\n                return line;\n            })\n                .join(' ');\n            options.headers['User-Agent'] = userAgent;\n        }\n        // By default gaxios treats any 2xx as valid, and all non 2xx status\n        // codes as errors.  This is a problem for HTTP 304s when used along\n        // with an eTag.\n        if (!options.validateStatus) {\n            options.validateStatus = (status) => {\n                return (status >= 200 && status < 300) || status === 304;\n            };\n        }\n        // Combine the GaxiosOptions options passed with this specific\n        // API call witht the global options configured at the API Context\n        // level, or at the global level.\n        const mergedOptions = Object.assign({}, (parameters.context.google ? parameters.context.google._options : {}), parameters.context._options, options);\n        delete mergedOptions.auth; // is overridden by our auth code\n        // Perform the HTTP request.  NOTE: this function used to return a\n        // mikeal/request object. Since the transition to Axios, the method is\n        // now void.  This may be a source of confusion for users upgrading from\n        // version 24.0 -> 25.0 or up.\n        if (authClient && typeof authClient === 'object') {\n            return authClient.request(mergedOptions);\n        }\n        else {\n            return (new google_auth_library_1.DefaultTransporter()).request(mergedOptions);\n        }\n    });\n}\n/**\n * Basic Passthrough Stream that records the number of bytes read\n * every time the cursor is moved.\n */\nclass ProgressStream extends stream.Transform {\n    constructor() {\n        super(...arguments);\n        this.bytesRead = 0;\n    }\n    // tslint:disable-next-line: no-any\n    _transform(chunk, encoding, callback) {\n        this.bytesRead += chunk.length;\n        this.emit('progress', this.bytesRead);\n        this.push(chunk);\n        callback();\n    }\n}\n//# sourceMappingURL=apirequest.js.map"]},"metadata":{},"sourceType":"script"}